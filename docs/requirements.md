# 权限管理系统 - CP/IP模块需求文档

## 📋 目录
1. [项目概述](#项目概述)
2. [用户角色与权限](#用户角色与权限)
3. [CP员工管理页面](#cp员工管理页面)
4. [IP员工管理页面](#ip员工管理页面)
5. [CP设置页面](#cp设置页面)
6. [IP设置页面](#ip设置页面)
7. [数据结构定义](#数据结构定义)
8. [技术要求](#技术要求)

---

## 📊 项目概述

### 系统名称
权限管理系统 - CP/IP模块

### 系统目标
为游戏公司提供完整的合作伙伴（CP）和知识产权（IP）员工管理解决方案，支持多层级权限控制、员工信息管理和设置配置。

### 技术栈
- **前端框架**: React 18 + TypeScript
- **UI组件库**: Ant Design 5.x
- **状态管理**: React Hooks
- **部署平台**: Vercel + GitHub Pages

---

## 👥 用户角色与权限

### 角色定义
| 角色 | 权限范围 | 可访问页面 |
|-----|----------|-----------|
| **管理员** | 全部权限 | 所有页面 |
| **CP Leader** | CP模块管理权限 | CP员工管理、CP设置 |
| **CP** | CP模块查看权限 | CP员工管理（只读） |
| **IP Leader** | IP模块管理权限 | IP员工管理、IP设置 |
| **IP** | IP模块查看权限 | IP员工管理（只读） |

### 权限控制逻辑
- **数据可见性**: 不同角色看到不同范围的数据
- **操作权限**: Leader角色可编辑，普通角色只能查看
- **菜单显示**: 基于角色动态显示菜单项

---

## 🏢 CP员工管理页面

### 功能概述
管理合作伙伴公司的员工信息，支持多维度筛选、信息编辑和权限控制。

### 页面布局
```
┌─────────────────────────────────────────────────────────────┐
│                    CP员工管理                                │
├─────────────────────────────────────────────────────────────┤
│  筛选栏1: [姓名] [罗马字] [CTW邮箱] [Game] [公司] [职位]        │
│  筛选栏2: [子职位] [状态] [雇佣类型] [重置] [搜索]              │
├─────────────────────────────────────────────────────────────┤
│                    员工数据表格                              │
│  └─ 分页控制                                                │
└─────────────────────────────────────────────────────────────┘
```

### 核心功能

#### 1. 员工信息展示
- **员工编号**: 自动生成的唯一标识
- **姓名显示**: 支持头像 + 中文姓名 + 罗马字姓名
- **基本信息**: 性别、电话号码、CTW邮箱地址
- **工作信息**: 雇佣类型、职位、子职位、状态
- **业务信息**: 所属Game、所属公司、G123ID

#### 2. 筛选功能
| 筛选项 | 类型 | 说明 |
|--------|------|------|
| 姓名 | 文本搜索 | 支持中文名和罗马字名模糊搜索 |
| 罗马字姓名 | 文本搜索 | 精确搜索罗马字姓名 |
| CTW邮箱 | 文本搜索 | 邮箱地址模糊搜索 |
| Game | 下拉选择 | 关联的游戏项目 |
| 公司 | 下拉选择 | 所属合作伙伴公司 |
| 职位 | 下拉选择 | 员工职位 |
| 子职位 | 下拉选择 | 详细职位分类 |
| 状态 | 下拉选择 | 员工状态（在职/离职等） |
| 雇佣类型 | 下拉选择 | 雇佣关系类型 |

#### 3. 权限控制
- **管理员**: 查看所有CP员工，可编辑所有信息
- **CP Leader**: 查看所有CP员工，可编辑所有信息
- **CP**: 只能查看自己公司的员工，不可编辑

#### 4. 数据操作
- **G123ID编辑**: 点击编辑按钮可修改员工的G123ID
- **批量操作**: 支持批量选择和操作
- **导出功能**: 支持数据导出（预留）

---

## 🎮 IP员工管理页面

### 功能概述
管理知识产权相关员工信息，界面简化，专注于IP业务核心数据。

### 页面特点
- **简化字段**: 移除员工编号、性别、电话号码等非核心字段
- **专注业务**: 突出Game、公司、G123ID等业务关键信息
- **快速操作**: 优化的筛选和编辑体验

### 数据字段
| 字段名 | 显示宽度 | 说明 |
|--------|----------|------|
| 姓名 | 200px | 头像 + 中文名 + 罗马字 |
| Game | 150px | 关联游戏项目 |
| 所属公司 | 150px | IP合作公司 |
| CTW邮箱地址 | 200px | 联系邮箱 |
| G123ID | 150px | 业务系统ID，可编辑 |

### 筛选功能
```
┌─────────────────────────────────────────────────────────────┐
│  [姓名搜索] [Game选择] [公司选择] [CTW邮箱搜索] [重置] [搜索]  │
└─────────────────────────────────────────────────────────────┘
```

### 权限控制
- **管理员**: 查看所有IP员工，可编辑所有信息
- **IP Leader**: 查看所有IP员工，可编辑所有信息
- **IP**: 只能查看自己公司的员工，不可编辑

---

## ⚙️ CP设置页面

### 功能概述
管理CP模块的基础配置，包括公司管理、游戏项目管理和主管设置。

### 页面布局
```
┌─────────────────────────────────────────────────────────────┐
│                    CP设置                                   │
├─────────────────────────────────────────────────────────────┤
│  公司管理                                                   │
│  ├─ 现有公司列表                                             │
│  ├─ 添加新公司                                               │
│  └─ 编辑/删除公司                                            │
├─────────────────────────────────────────────────────────────┤
│  游戏管理                                                   │
│  ├─ 游戏项目列表                                             │
│  ├─ 添加新游戏                                               │
│  └─ 游戏-公司关联管理                                        │
├─────────────────────────────────────────────────────────────┤
│  主管设置                                                   │
│  ├─ 当前主管信息                                             │
│  └─ 设置主管                                                 │
└─────────────────────────────────────────────────────────────┘
```

### 核心功能

#### 1. 公司管理
- **公司列表**: 显示所有合作伙伴公司
- **添加公司**: 创建新的合作伙伴公司
- **编辑公司**: 修改公司信息
- **删除公司**: 删除不需要的公司（需确认）

#### 2. 游戏管理
- **游戏列表**: 显示所有游戏项目
- **添加游戏**: 创建新的游戏项目
- **游戏分配**: 将游戏分配给特定公司
- **关联管理**: 管理游戏与公司的关联关系

#### 3. 主管设置
- **主管指定**: 为每个公司/游戏指定主管
- **权限配置**: 设置主管的权限范围
- **联系信息**: 主管的联系方式管理

### 数据示例
```javascript
// 公司数据
companies: [
  { id: 1, name: 'CyberAgent', description: '日本数字营销公司' },
  { id: 2, name: 'DeNA', description: '日本移动游戏公司' }
]

// 游戏数据
games: [
  { id: 1, name: 'negima', company: 'CyberAgent' },
  { id: 2, name: 'highschool', company: 'CyberAgent' }
]
```

---

## 🎯 IP设置页面

### 功能概述
管理IP模块的基础配置，结构与CP设置类似但专注于IP业务。

### 主要配置项
- **IP公司管理**: 讲谈社、KADOKAWA等IP授权公司
- **IP项目管理**: 管理IP相关的游戏项目
- **授权管理**: IP授权关系和权限设置

### 默认配置
```javascript
// IP公司
ipCompanies: [
  { id: 1, name: '讲谈社', type: 'publisher' },
  { id: 2, name: 'KADOKAWA', type: 'publisher' }
]

// IP游戏项目
ipGames: [
  { id: 1, name: 'negima', company: '讲谈社' },
  { id: 2, name: 'highschool', company: '讲谈社' },
  { id: 3, name: 'slime', company: 'KADOKAWA' }
]
```

---

## 📊 数据结构定义

### CP员工数据结构
```typescript
interface CPEmployee {
  id: string;                    // 员工ID
  employeeNumber: number;        // 员工编号
  name: string;                  // 姓名
  romanName: string;             // 姓名罗马字
  game: string;                  // 关联游戏
  gender: 'male' | 'female';     // 性别
  phoneNumber: string;           // 电话号码
  ctwEmail: string;              // CTW邮箱地址
  employmentType: string;        // 雇佣类型
  position: string;              // 职位
  subPosition: string;           // 子职位
  status: string;                // 状态
  avatar: string;                // 头像URL
  g123ID: string;                // G123ID
  company: string;               // 所属公司
}
```

### IP员工数据结构
```typescript
interface IPEmployee {
  id: string;                    // 员工ID
  name: string;                  // 姓名
  romanName: string;             // 姓名罗马字
  game: string;                  // 关联游戏
  company: string;               // 所属公司
  ctwEmail: string;              // CTW邮箱地址
  g123ID: string;                // G123ID
  avatar: string;                // 头像URL
}
```

### 筛选器数据结构
```typescript
interface CPEmployeeFilterType {
  name: string;                  // 姓名搜索
  romanName: string;             // 罗马字姓名搜索
  ctwEmail: string;              // CTW邮箱搜索
  game: string;                  // Game筛选
  company: string;               // 公司筛选
  position: string;              // 职位筛选
  subPosition: string;           // 子职位筛选
  status: string;                // 状态筛选
  employmentType: string;        // 雇佣类型筛选
}
```

---

## 🔧 技术要求

### 前端技术规范
- **React 18**: 使用函数组件和Hooks
- **TypeScript**: 严格类型检查
- **Ant Design 5**: 统一UI组件库
- **响应式设计**: 支持多屏幕尺寸

### 性能要求
- **首屏加载**: < 3秒
- **筛选响应**: < 500ms
- **数据渲染**: 支持虚拟滚动（大数据量）

### 兼容性要求
- **浏览器**: Chrome 80+、Firefox 75+、Safari 13+
- **移动端**: iOS 12+、Android 8+

### 部署要求
- **环境**: Vercel（主）+ GitHub Pages（备）
- **域名**: 支持自定义域名
- **HTTPS**: 强制HTTPS访问

---

## 📝 开发计划

### Phase 1: 基础功能（已完成）
- ✅ CP员工管理页面
- ✅ IP员工管理页面
- ✅ 基础筛选功能
- ✅ 权限控制

### Phase 2: 设置功能（已完成）
- ✅ CP设置页面
- ✅ IP设置页面
- ✅ 公司/游戏管理

### Phase 3: 优化功能（规划中）
- 🔄 数据导出功能
- 🔄 批量操作功能
- 🔄 高级筛选功能
- 🔄 数据统计报表

---

## 🎯 验收标准

### 功能验收
- [ ] 所有页面正常加载和显示
- [ ] 筛选功能准确有效
- [ ] 权限控制正确实现
- [ ] 数据编辑功能正常

### 性能验收
- [ ] 页面加载速度符合要求
- [ ] 大数据量处理正常
- [ ] 内存占用合理

### 兼容性验收
- [ ] 主流浏览器正常显示
- [ ] 移动端适配良好
- [ ] 不同分辨率适配

---

*文档版本: v1.0*  
*最后更新: 2024年*  
*维护人员: 开发团队* 